(function(e){function t(t){for(var n,a,o=t[0],i=t[1],s=t[2],f=0,d=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);h&&h(t);while(d.length)d.shift()();return u.push.apply(u,s||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,a=1;a<r.length;a++){var o=r[a];0!==c[o]&&(n=!1)}n&&(u.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},c={app:0},u=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-09dc59d6":"562cf518","chunk-0221cb08":"edee3952","chunk-6fa6f1eb":"1b3bc4c9","chunk-4c48e069":"2dd1dbd9","chunk-1b93c344":"f1a88048","chunk-3a4fac72":"5c914277","chunk-1ca9fe7e":"06817e21","chunk-62affa94":"412ad38e","chunk-66d7a329":"67aefc33","chunk-285a26f2":"6aa1eb4e","chunk-4eec7a06":"7dfb58f4","chunk-8c66fb4a":"0bb446b4","chunk-2d20e828":"bd510f58","chunk-607bedea":"0497e531","chunk-2d0d6412":"5cc767a8","chunk-6b7ba9d4":"977473c1","chunk-0b6879af":"715ae7de","chunk-3290fc50":"245a5055"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={"chunk-09dc59d6":1,"chunk-0221cb08":1,"chunk-6fa6f1eb":1,"chunk-4c48e069":1,"chunk-1b93c344":1,"chunk-3a4fac72":1,"chunk-1ca9fe7e":1,"chunk-62affa94":1,"chunk-66d7a329":1,"chunk-285a26f2":1,"chunk-4eec7a06":1,"chunk-8c66fb4a":1,"chunk-0b6879af":1,"chunk-3290fc50":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-09dc59d6":"113299ec","chunk-0221cb08":"5d319519","chunk-6fa6f1eb":"7c795c94","chunk-4c48e069":"76874681","chunk-1b93c344":"7638bb48","chunk-3a4fac72":"b1715810","chunk-1ca9fe7e":"0533c543","chunk-62affa94":"5b7e420c","chunk-66d7a329":"87e6d529","chunk-285a26f2":"a49f705f","chunk-4eec7a06":"fba5bb1e","chunk-8c66fb4a":"7c795c94","chunk-2d20e828":"31d6cfe0","chunk-607bedea":"31d6cfe0","chunk-2d0d6412":"31d6cfe0","chunk-6b7ba9d4":"31d6cfe0","chunk-0b6879af":"968cce63","chunk-3290fc50":"77a319e5"}[e]+".css",c=i.p+n,u=document.getElementsByTagName("link"),o=0;o<u.length;o++){var s=u[o],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===n||f===c))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){s=d[o],f=s.getAttribute("data-href");if(f===n||f===c)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||c,u=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=n,delete a[e],h.parentNode.removeChild(h),r(u)},h.href=c;var l=document.getElementsByTagName("head")[0];l.appendChild(h)})).then((function(){a[e]=0})));var n=c[e];if(0!==n)if(n)t.push(n[2]);else{var u=new Promise((function(t,r){n=c[e]=[t,r]}));t.push(n[2]=u);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=o(e);var d=new Error;s=function(t){f.onerror=f.onload=null,clearTimeout(h);var r=c[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}c[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var h=f;u.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("4de4"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[e.loading?r("v-main",[r("Header"),r("v-row",{staticClass:"justify-center my-16"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"100"}})],1)],1):r("router-view")],1)},c=[],u=(r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),o=r("5530"),i=r("2f62"),s=r("aa77"),f={name:"App",data:function(){return{loading:!0}},computed:Object(o["a"])({},Object(i["c"])(["pizzas","cart","user","orders","isAuthenticated"])),methods:Object(o["a"])({},Object(i["b"])(["getPizzas","getCart","getUser","getOrders"])),created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([Object(s["b"])(e.user)&&e.getUser(),Object(s["b"])(e.pizzas)&&e.getPizzas(),Object(s["b"])(e.cart)&&e.getCart(),Object(s["b"])(e.orders)&&e.isAuthenticated&&e.getOrders()]);case 3:return t.prev=3,e.loading=!1,t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])})))()},components:{Header:function(){return Promise.all([r.e("chunk-09dc59d6"),r.e("chunk-0221cb08"),r.e("chunk-6fa6f1eb")]).then(r.bind(null,"0418"))}}},d=f,h=(r("034f"),r("2877")),l=r("6544"),p=r.n(l),m=r("7496"),b=r("f6c4"),g=r("490a"),v=r("0fd9"),k=Object(h["a"])(d,a,c,!1,null,null,null),O=k.exports;p()(k,{VApp:m["a"],VMain:b["a"],VProgressCircular:g["a"],VRow:v["a"]});var E=r("8c4f");n["a"].use(E["a"]);var y=new E["a"]({routes:[{path:"/",name:"home",component:function(){return Promise.all([r.e("chunk-09dc59d6"),r.e("chunk-66d7a329")]).then(r.bind(null,"bb51"))}},{path:"/order",name:"order",component:function(){return Promise.all([r.e("chunk-09dc59d6"),r.e("chunk-4c48e069"),r.e("chunk-1b93c344"),r.e("chunk-3a4fac72")]).then(r.bind(null,"cf2a"))}},{path:"/auth",name:"auth",component:function(){return Promise.all([r.e("chunk-09dc59d6"),r.e("chunk-62affa94")]).then(r.bind(null,"2fef"))}},{path:"/orders",name:"orders",component:function(){return Promise.all([r.e("chunk-09dc59d6"),r.e("chunk-4c48e069"),r.e("chunk-1ca9fe7e")]).then(r.bind(null,"1e4a"))}}]}),w=y,R=r("bc3a"),S=r.n(R),j=S.a.create({baseURL:"/api"}),T=j,_=(r("99af"),r("cb29"),r("c740"),r("d81d"),r("a434"),r("15fd")),C=r("f7fe"),A=r.n(C),z={cart:[]},x={SET_CART:function(e,t){e.cart=t},ADD_TO_CART:function(e,t){var r=t.count,n=Object(_["a"])(t,["count"]),a=Array(r).fill().map((function(){return Object(o["a"])({},n)}));e.cart=e.cart.concat(a)},REMOVE_FROM_CART:function(e,t){var r=t.id,n=t.count;if(1===n){var a=e.cart.findIndex((function(e){var t=e.id;return t===r}));-1!==a&&e.cart.splice(a,1)}else e.cart=e.cart.filter((function(e){var t=e.id;return t!==r}))}},P={getCart:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,T.get("/cart");case 3:return n=t.sent.data,r("SET_CART",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},addToCart:function(e,t){var r=e.commit,n=e.dispatch;return r("ADD_TO_CART",t),n("updateCart")},clearCart:function(e){var t=e.commit,r=e.dispatch;t("SET_CART",[]),r("updateCart")},removeFromCart:function(e,t){var r=e.commit,n=e.dispatch;r("REMOVE_FROM_CART",t),n("updateCart")},updateCart:A()((function(e){var t=e.state;T.post("/cart/set",t.cart)}),600)},D={cart:function(e){var t=e.cart;return t}},I={state:z,mutations:x,actions:P,getters:D},U="pizza:token",L={token:localStorage.getItem(U)||"",user:null},N={SET_USER:function(e,t){e.user=t},SET_TOKEN:function(e,t){e.token=t,Object(s["b"])(t)?localStorage.removeItem(U):localStorage.setItem(U,t)}},M={getUser:function(e){var t=e.getters,r=e.commit;return!Object(s["b"])(t.token)&&T.get("/user/me",{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){var t=e.data;return r("SET_USER",t.user)})).catch((function(){return r("SET_TOKEN","")}))},auth:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,a,c,u,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.path,c=t.credentials,r.prev=2,r.next=5,T.post(a,c);case 5:return u=r.sent.data,o=u.token,i=u.user,n("SET_USER",i),n("SET_TOKEN",o),r.abrupt("return",{token:o,user:i});case 13:return r.prev=13,r.t0=r["catch"](2),r.abrupt("return",r.t0.response.data||r.t0);case 16:case"end":return r.stop()}}),r,null,[[2,13]])})))()},login:function(e,t){var r=e.dispatch;return r("auth",{path:"/user/login",credentials:t})},register:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,r.abrupt("return",n("auth",{path:"/user",credentials:t}));case 2:case"end":return r.stop()}}),r)})))()},logout:function(e){var t=e.commit,r=e.getters,n=r.token;return t("SET_USER",null),t("SET_TOKEN",""),T.get("/user/logout",{headers:{Authorization:"Bearer ".concat(n)}})}},B={user:function(e){var t=e.user;return t},token:function(e){var t=e.token;return t},isAuthenticated:function(e){var t=e.token;return!Object(s["b"])(t)}},V={state:L,mutations:N,actions:M,getters:B},K={orders:[]},F={SET_ORDERS:function(e,t){e.orders=t},MARK_DELIVERED:function(e,t){var r=e.orders.findIndex((function(e){return e.id===t}));r>-1&&(e.orders[r].delivered=!0)}},G={getOrders:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.getters,t.next=3,T.get("/order",{headers:{Authorization:"Bearer ".concat(n.token)}}).catch((function(){return{data:[]}}));case 3:a=t.sent.data,r("SET_ORDERS",a);case 5:case"end":return t.stop()}}),t)})))()},addOrder:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.getters,r.next=3,T.post("/order",t,{headers:{Authorization:"Bearer ".concat(a.token)}});case 3:c=r.sent.data,n("SET_ORDERS",a.orders.concat(c));case 5:case"end":return r.stop()}}),r)})))()},markDelivered:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.getters,r.next=3,T.post("/order/".concat(t,"/mark"),null,{headers:{Authorization:"Bearer ".concat(a.token)}});case 3:return c=r.sent,n("MARK_DELIVERED",t),r.abrupt("return",c);case 6:case"end":return r.stop()}}),r)})))()}},Z={orders:function(e){var t=e.orders;return t}},H={state:K,mutations:F,actions:G,getters:Z};n["a"].use(i["a"]);var q=new i["a"].Store({state:{pizzas:[],currency:localStorage.getItem("currency")||"usd"},mutations:{SET_PIZZAS:function(e,t){e.pizzas=t},TOGGLE_CURRENCY:function(e){e.currency="usd"===e.currency?"eur":"usd",localStorage.setItem("currency",e.currency)}},actions:{getPizzas:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,T.get("/pizza");case 3:n=t.sent.data,r("SET_PIZZAS",n);case 5:case"end":return t.stop()}}),t)})))()},toggleCurrency:function(e){var t=e.commit;t("TOGGLE_CURRENCY")}},getters:{pizzas:function(e){var t=e.pizzas;return t},currency:function(e){var t=e.currency;return t}},modules:{cart:I,user:V,order:H}}),J=q,Y=r("f309");n["a"].use(Y["a"]);var $=new Y["a"]({});n["a"].config.productionTip=!1,n["a"].filter("toCurrency",s["c"]),n["a"].filter("toLocaleDateString",(function(e){return new Date(e).toLocaleDateString()})),new n["a"]({router:w,store:J,vuetify:$,render:function(e){return e(O)}}).$mount("#app")},"85ec":function(e,t,r){},aa77:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return d}));r("d81d"),r("4fad");var n=r("5530"),a=r("3835"),c=r("53ca"),u=r("e831"),o=r.n(u),i=Object.prototype.hasOwnProperty,s=function(e){if(null===e||void 0===e)return!0;if(0===e.length)return!0;if(e.length>0)return!1;if("object"!==Object(c["a"])(e))return!0;for(var t in e)if(i.call(e,t))return!1;return!0},f=function(e,t){try{"number"!==typeof e&&(e=+e);var r=new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:0});return r.format(e)}catch(n){return e}},d=function(e){var t=o()(e,"id");return Object.entries(t).map((function(e){var t=Object(a["a"])(e,2),r=t[1];return Object(n["a"])(Object(n["a"])({},r[0]),{},{count:r.length})}))}}});
//# sourceMappingURL=app.e909d779.js.map